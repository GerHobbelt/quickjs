# https://gittup.org/tup/manual.html
include_rules

DEFINES_HOST += -DJS_SHARED_LIBRARY=1
DEFINES_TARGET += -DJS_SHARED_LIBRARY=1

DEPS_HOST = ../cutils/cutils.host.o
DEPS_HOST += ../libbf/libbf.host.o
DEPS_HOST += ../libregexp/libregexp.host.o
DEPS_HOST += ../libunicode/libunicode.host.o
DEPS_HOST += ../quickjs/quickjs.host.o
DEPS_HOST += ../quickjs-libc/quickjs-libc.host.o

DEPS_TARGET = ../cutils/cutils.target.o
DEPS_TARGET += ../libbf/libbf.target.o
DEPS_TARGET += ../libregexp/libregexp.target.o
DEPS_TARGET += ../libunicode/libunicode.target.o
DEPS_TARGET += ../quickjs/quickjs.target.o
DEPS_TARGET += ../quickjs-libc/quickjs-libc.target.o

: bjson.c $(DEPS_HOST) |> !compile_host_c_shared_library |> bjson.host.o libbjson.host.so
: bjson.c $(DEPS_TARGET) |> !compile_target_c_shared_library |> bjson.target.o libbjson.target.so
