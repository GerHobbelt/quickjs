# https://gittup.org/tup/manual.html
include_rules

include ../archives/full/deps.tup

# TODO: it'd be better if output from qjsc didn't rely on an additional header file
CFLAGS_HOST += -I../quickjs-libc
CFLAGS_TARGET += -I../quickjs-libc

: sum.js | ../qjsc/qjsc.host |> ../qjsc/qjsc.host -e -o %o -m %f |> sum.c
: sum.c $(DEPS_HOST) |> !compile_host_c_program |> sum.host
: sum.c $(DEPS_TARGET) |> !compile_target_c_program |> sum.target
